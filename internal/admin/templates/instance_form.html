{{define "instance_form"}}
<div class="card" id="instance-form">
  <h2>{{if .ID}}Edit Instance{{else}}Add Instance{{end}}</h2>
  {{if .Error}}
  <div class="alert alert-error">{{.Error}}</div>
  {{end}}
  <form {{if .ID}}hx-put="/instances/{{.ID}}"{{else}}hx-post="/instances"{{end}}
    hx-target="{{if .ID}}#instance-{{.ID}}{{else}}#instance-list{{end}}"
    hx-swap="{{if .ID}}outerHTML{{else}}beforeend{{end}}"
    hx-on::after-request="if(event.detail.successful) document.getElementById('instance-form-area').innerHTML = ''; if(event.detail.successful && !document.getElementById('instance-list')) location.reload();">
    <div class="form-row">
      <div class="form-group">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" value="{{.Name}}" required placeholder="Living Room Clock">
      </div>
      <div class="form-group">
        <label for="host">Redis Host</label>
        <input type="text" id="host" name="host" value="{{.Host}}" required placeholder="192.168.1.100">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="port">Redis Port</label>
        <input type="number" id="port" name="port" value="{{if .Port}}{{.Port}}{{else}}6379{{end}}" required>
      </div>
      <div></div>
    </div>
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">{{if .ID}}Update{{else}}Add{{end}}</button>
      <button type="button" class="btn" onclick="document.getElementById('instance-form-area').innerHTML = ''">Cancel</button>
    </div>
  </form>
</div>
{{end}}
